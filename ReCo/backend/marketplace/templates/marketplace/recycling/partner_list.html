{% extends 'base.html' %}

{% block title %}Parceiros de Reciclagem{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
<div class="container d-flex flex-column gap-4">
  <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
    <div>
      <h1 class="h3 mb-1">Parceiros de reciclagem</h1>
      <p class="text-muted mb-0">Organizações que recebem os lotes para processamento.</p>
    </div>
    <a class="btn btn-outline-secondary" href="{% url 'doacoes:recycling_dashboard' %}">Voltar</a>
  </div>

  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table align-middle mb-0">
        <thead>
          <tr>
            <th>Empresa</th>
            <th>Contato</th>
            <th>Capacidade</th>
            <th>Lotes</th>
            <th>Peso (kg)</th>
            <th>Status</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for partner in partners %}
            <tr>
              <td>{{ partner.company_name }}</td>
              <td>
                <div>{{ partner.contact_person }}</div>
                <small class="text-muted">{{ partner.phone }} • {{ partner.email }}</small>
              </td>
              <td>{{ partner.max_monthly_capacity_kg }} kg/mês</td>
              <td>{{ partner.total_batches|default:0 }}</td>
              <td>{{ partner.total_weight|default_if_none:0|floatformat:1 }}</td>
              <td>
                {% if partner.is_active %}
                  <span class="badge bg-success">Ativo</span>
                {% else %}
                  <span class="badge bg-secondary">Inativo</span>
                {% endif %}
              </td>
              <td class="text-end">
                <a class="btn btn-sm btn-outline-primary" href="{% url 'doacoes:recycling_partner_detail' partner.pk %}">Detalhes</a>
              </td>
            </tr>
          {% empty %}
            <tr><td colspan="7" class="text-center text-muted py-4">Nenhum parceiro cadastrado.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
